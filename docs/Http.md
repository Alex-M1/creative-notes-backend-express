# User

## Registration
Чтобы произвести регистрацию в приложении необходимо отправить **POST** запрос по роуту ***/api/registration*** <br>
Тело запроса должно выглядеть следующим образом:
```
{
  "login":"admin",
  "password": "Admin123"
}
```
Все поля обязательны. Поле логин можно вводить только латинские символы и цифры <br>
Пароль должен состоять минимум из 6 символов, максимум 12 , как минимум 1 буква большого регистра и как минимум 1 цифра<br>
Если регистрация успешна вернется ответ со статусом ***201*** 
```
{
  "message": "success"
}
```
Если пользователь уже существует, то вернется ответ со статусом ***400***
```
{
  "message": "already_reg"
}
```
Если логин или пароль введен не верно вернется ответ со статусом ***400*** и сообщениями:
```
{
 "message": "invalid_login"
}
||
{
 "message": "invalid_password"
}
```

## Authorization
Чтобы произвести авторизацию необходимо отправить **POST** запрос на урл ***/api/authorization***, тело запроса <br>должно выгляеть следующим образом
```
{
  "login":"admin",
  "password": "admin123"
}
```
Все поля обязательны. Валидация аналогична регистрации
Если логин или пароль введен не верно вернется ответ со статусом ***400*** и сообщениями:
```
{
 "message": "invalid_login"
}
||
{
 "message": "invalid_password"
}
```
Если авторизация прошла успешно, вернется ответ со статусом **201**
```
{
    "token": "строка с токеном",
    "role": User | Manager | SuperAdmin
}
```
Если логин и пароль прошли валидацию, но такого пользователя не существует, придет ответ со статусом 400 и сообщением:
```
{
    "message": "user_not_found",
}
```
Если логин и пароль прошли валидацию,пользователь с таким логинов существует, но пароли не совпадают, придет ответ со статусом 401 и сообщением:
```
{
    "message": "invalid_password"
}
```

### **Важно** !!!
**После авторизации в каждом запросе в заголовке ***Authorization*** необходимо отправить токен**<br>
При пустом заголовке, неверном токене или токене у которого вышел срок жизни прийдет следующий ответ
Статус ***404***
```
{
  "message": "un_autorized"
}
```

# Update user data 
Чтобы произвести смену данных пользователя необходимо отправить **PUT** запрос на урл ***/api/change_user_data***,<br> 
тело запроса должно выгляеть следующим образом
```
{
name: string;
lastName: string;
img: string (Base64);
city: string;
age: string;
}
```
В ответе вернутся новые данные

# Change password 
Чтобы произвести смену пароля необходимо отправить **PUT** запрос на урл ***/api/change_user_data***,<br> 
тело запроса должно выгляеть следующим образом
```
{
  newPassword: string;
  oldPassword: string;
}
```

# Change user role 
Чтобы произвести смену роли юзера, необходимо иметь роль SuperAdmin и отправить **PUT** запрос на урл ***/api/change_user_data***,<br> 
тело запроса должно выгляеть следующим образом
```
{
  user: string; id юзера которому нужно сменить роль
  userRole: Manager | User
}
```